<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CultureVerse - Discover Your Next Favorite</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .heading-font {
            font-family: 'Playfair Display', serif;
        }
        .category-badge {
            transition: all 0.3s ease;
        }
        .category-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .article-card {
            transition: all 0.3s ease;
        }
        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .spoiler-content {
            transition: max-height 0.5s ease, opacity 0.5s ease;
        }
        .pagination-btn {
            transition: all 0.2s ease;
        }
        .pagination-btn:hover {
            transform: scale(1.05);
        }
        .recommendation-card {
            transition: all 0.3s ease;
        }
        .recommendation-card:hover {
            transform: translateY(-3px);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Фон -->
<div id="page-bg"
     class="fixed inset-0 -z-20 bg-no-repeat bg-cover bg-center">
</div>

<!-- затемнение -->
<div class="pointer-events-none fixed inset-0 -z-10 bg-gradient-to-b from-transparent via-transparent to-gray-50"></div>

    <!-- Header -->
<header class="bg-white shadow-sm sticky top-0 z-50">
  <div class="container mx-auto px-4 py-4 flex justify-between items-center">
    
    <!-- Лого -->
    <a href="index.html" class="flex items-center space-x-2">
      <div class="w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center">
        <i data-feather="book-open" class="text-white"></i>
      </div>
      <h1 class="text-2xl font-bold heading-font text-gray-800">CultureVerse</h1>
    </a>

    <!-- Категории (только на ПК) -->
    <nav class="hidden md:flex space-x-8" id="category-nav">
      <button data-category="All" class="category-btn text-gray-600 hover:text-indigo-600 font-medium">All</button>
      <button data-category="Books" class="category-btn text-gray-600 hover:text-indigo-600 font-medium">Books</button>
      <button data-category="Movies" class="category-btn text-gray-600 hover:text-indigo-600 font-medium">Movies</button>
      <button data-category="Series" class="category-btn text-gray-600 hover:text-indigo-600 font-medium">Series</button>
      <button data-category="Anime" class="category-btn text-gray-600 hover:text-indigo-600 font-medium">Anime</button>
      <button data-category="Games" class="category-btn text-gray-600 hover:text-indigo-600 font-medium">Games</button>
    </nav>

    <!-- Поиск (только на ПК) -->
    <div class="hidden md:flex items-center space-x-4 w-full md:w-auto">
      <div class="relative w-full">
        <input type="text" placeholder="Search articles..."
          class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 
                 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
        <i data-feather="search" class="absolute left-3 top-2.5 text-gray-400"></i>
      </div>
    </div>

    <!-- Гамбургер (только на мобилке, теперь справа) -->
    <button id="menu-toggle" class="md:hidden text-gray-600 focus:outline-none ml-4">
      <i data-feather="menu"></i>
    </button>

  </div>

  <!-- Выпадающее меню категорий (только мобилка) -->
  <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-200 px-4 py-3 space-y-2">
    <button data-category="All" class="block w-full text-left category-btn text-gray-600 hover:text-indigo-600 font-medium">All</button>
    <button data-category="Books" class="block w-full text-left category-btn text-gray-600 hover:text-indigo-600 font-medium">Books</button>
    <button data-category="Movies" class="block w-full text-left category-btn text-gray-600 hover:text-indigo-600 font-medium">Movies</button>
    <button data-category="Series" class="block w-full text-left category-btn text-gray-600 hover:text-indigo-600 font-medium">Series</button>
    <button data-category="Anime" class="block w-full text-left category-btn text-gray-600 hover:text-indigo-600 font-medium">Anime</button>
    <button data-category="Games" class="block w-full text-left category-btn text-gray-600 hover:text-indigo-600 font-medium">Games</button>
  </div>
</header>

    <!-- Hero Section -->
   <!-- Hero Section -->
<section id="hero-section" class="py-12 relative text-white">
  <!-- Фон из Strapi -->
  <div id="hero-bg" class="absolute inset-0 -z-10"></div>

  <div class="container mx-auto px-4 text-center relative">
    <h1 class="text-4xl md:text-5xl font-bold heading-font mb-4" data-aos="fade-up">
      Discover Your Next Obsession
    </h1>
    <p class="text-xl max-w-2xl mx-auto mb-8" data-aos="fade-up" data-aos-delay="100">
      Explore reviews, recommendations, and deep dives into books, movies, series, anime, and games.
    </p>
    <div class="max-w-2xl mx-auto mb-8" data-aos="fade-up" data-aos-delay="150">
      <div class="relative">
        <input type="text" placeholder="Search articles..." 
               class="w-full pl-12 pr-4 py-3 rounded-full border-0 
                      focus:ring-2 focus:ring-white focus:ring-opacity-50 
                      bg-white bg-opacity-20 text-white 
                      placeholder-white placeholder-opacity-70">
        <i data-feather="search" class="absolute left-4 top-3.5 text-white text-opacity-70"></i>
        <div class="suggestions absolute bg-white text-black border border-gray-200 mt-1 w-full rounded-md shadow-lg z-50 hidden"></div>
      </div>
    </div>
  </div>
</section>


    <!-- Articles Grid -->
    <section class="py-12">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold heading-font text-gray-800 mb-8 text-center">Latest Articles</h2>
            
            <div id="articles" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>

            
            <!-- Pagination -->
            <div class="flex justify-center mt-12">
                <nav class="flex items-center space-x-4">
                    <button id="prevPage" class="pagination-btn w-12 h-12 flex items-center justify-center rounded-full bg-white border border-gray-200 text-gray-500 hover:bg-gray-50 transition-transform hover:scale-105">
                        <i data-feather="chevron-left" class="w-6 h-6"></i>
                    </button>
                    
                    <div class="flex items-center space-x-2">
                        <span id="currentPage" class="text-lg font-medium">1</span>
                        <span class="text-gray-500">of</span>
                        <span id="totalPages" class="text-lg font-medium">5</span>
                    </div>
                    
                    <button id="nextPage" class="pagination-btn w-12 h-12 flex items-center justify-center rounded-full bg-white border border-gray-200 text-gray-500 hover:bg-gray-50 transition-transform hover:scale-105">
                        <i data-feather="chevron-right" class="w-6 h-6"></i>
                    </button>
                </nav>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const articlesContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-3');
                    const articles = Array.from(articlesContainer.children);
                    const articlesPerPage = 12;
                    const totalPages = Math.ceil(articles.length / articlesPerPage);
                    let currentPage = 1;
                    
                    // Initialize total pages display
                    document.getElementById('totalPages').textContent = totalPages;
                    
                    // Function to show articles for current page
                    function showPage(page) {
                        const startIdx = (page - 1) * articlesPerPage;
                        const endIdx = startIdx + articlesPerPage;
                        
                        articles.forEach((article, index) => {
                            if (index >= startIdx && index < endIdx) {
                                article.style.display = 'block';
                                article.setAttribute('data-aos-delay', (index % articlesPerPage) * 50);
                            } else {
                                article.style.display = 'none';
                            }
                        });
                        
                        document.getElementById('currentPage').textContent = page;
                        currentPage = page;
                        
                        // Update button states
                        document.getElementById('prevPage').disabled = page === 1;
                        document.getElementById('nextPage').disabled = page === totalPages;
                    }
                    
                    // Initial page load
                    showPage(1);
                    
                    // Pagination button event listeners
                    document.getElementById('prevPage').addEventListener('click', () => {
                        if (currentPage > 1) {
                            showPage(currentPage - 1);
                            window.scrollTo({ top: articlesContainer.offsetTop - 100, behavior: 'smooth' });
                        }
                    });
                    
                    document.getElementById('nextPage').addEventListener('click', () => {
                        if (currentPage < totalPages) {
                            showPage(currentPage + 1);
                            window.scrollTo({ top: articlesContainer.offsetTop - 100, behavior: 'smooth' });
                        }
                    });
                    
                    // Keyboard navigation
                    document.addEventListener('keydown', (e) => {
                        if (e.key === 'ArrowLeft' && currentPage > 1) {
                            showPage(currentPage - 1);
                            window.scrollTo({ top: articlesContainer.offsetTop - 100, behavior: 'smooth' });
                        } else if (e.key === 'ArrowRight' && currentPage < totalPages) {
                            showPage(currentPage + 1);
                            window.scrollTo({ top: articlesContainer.offsetTop - 100, behavior: 'smooth' });
                        }
                    });
                });
            </script>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white pt-16 pb-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center">
                            <i data-feather="book-open" class="text-white w-4 h-4"></i>
                        </div>
                        <h3 class="text-xl font-bold heading-font">CultureVerse</h3>
                    </div>
                    <p class="text-gray-400 mb-4">Your ultimate destination for entertainment insights, reviews, and recommendations across books, movies, series, anime, and games.</p>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Categories</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Books</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Movies</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">TV Series</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Anime</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Games</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold mb-4">Company</h4>
                    <ul class="space-y-2">
                        <li><a href="about-us.html" class="text-gray-400 hover:text-white">About Us</a></li>
                        <li><a href="privacy-policy.html" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
                        <li><a href="terms-of-service.html" class="text-gray-400 hover:text-white">Terms of Service</a></li>
                    </ul>
                </div>
                
            </div>
            
            <div class="pt-8 border-t border-gray-700 text-center text-gray-400">
                <p class="text-center">&copy; 2025 CultureVerse. All rights reserved.</p>
            </div>
        </div>
    </footer>

 <script>AOS.init();</script>
    <script>feather.replace();</script>
    <script>
  // адрес твоего WordPress
  const WP_URL = "https://cultureverse.free.nf";
</script>
<script>
// ======= ВЫВОД СТАТЕЙ НА ГЛАВНОЙ (WordPress) =======

// состояние
let allArticles = [];
let activeCategory = "All";
let searchQuery = "";

// утилита: почистить HTML в аннотации
function stripHtml(html) {
  const div = document.createElement("div");
  div.innerHTML = html || "";
  return (div.textContent || "").trim();
}

// привести WP-пост к виду, удобному для рендера
function normalizePost(post) {
  const cover = post?._embedded?.["wp:featuredmedia"]?.[0]?.source_url 
                || "https://via.placeholder.com/640x360";
  const category = post?._embedded?.["wp:term"]?.[0]?.[0]?.name || "General";
  return {
    id: post.id,
    title: post.title.rendered,
    preview: stripHtml(post.excerpt.rendered),
    date: post.date,
    category,
    cover
  };
}

// загрузка списка постов
async function loadArticles() {
  try {
    const res = await fetch(`${WP_URL}/wp-json/wp/v2/posts?_embed&per_page=100`);
    const data = await res.json();
    allArticles = (Array.isArray(data) ? data : []).map(normalizePost);
    applyFilters();
  } catch (e) {
    console.error("Ошибка загрузки статей из WP:", e);
    document.querySelector("#articles").innerHTML =
      "<p class='text-gray-500 text-center'>Не удалось загрузить статьи</p>";
  }
}

// применить фильтры (категория + поиск)
function applyFilters() {
  let filtered = allArticles;

  if (activeCategory !== "All") {
    filtered = filtered.filter(a => a.category === activeCategory);
  }

  if (searchQuery) {
    const q = searchQuery.toLowerCase();
    filtered = filtered.filter(a => a.title.toLowerCase().includes(q));
  }

  renderArticles(filtered);
}

// отрисовка карточек
function renderArticles(articles) {
  const container = document.querySelector("#articles");
  container.innerHTML = "";

  if (!articles.length) {
    container.innerHTML = "<p class='text-gray-500 text-center'>Нет статей</p>";
    return;
  }

  articles.forEach(a => {
    const dateStr = new Date(a.date).toLocaleDateString();
    const card = `
      <div class="article-card bg-white rounded-xl overflow-hidden shadow-md" data-aos="fade-up">
        <img src="${a.cover}" alt="${a.title}" class="w-full h-48 object-cover">
        <div class="p-6">
          <div class="flex justify-between items-start mb-3">
            <span class="bg-indigo-100 text-indigo-800 text-xs font-semibold px-2.5 py-0.5 rounded">${a.category}</span>
            <span class="text-gray-500 text-sm">${dateStr}</span>
          </div>
          <h3 class="text-xl font-bold heading-font text-gray-800 mb-2">${a.title}</h3>
          <p class="text-gray-600 mb-4">${a.preview}</p>
          <a href="article.html?id=${a.id}" class="text-indigo-600 font-medium hover:text-indigo-800 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-play mr-2">
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            Read
          </a>
        </div>
      </div>
    `;
    container.insertAdjacentHTML("beforeend", card);
  });

  // обновим иконки
  if (window.feather) feather.replace();
}

// инициализация: кнопки категорий + поиск + загрузка
document.addEventListener("DOMContentLoaded", () => {
  // кнопки категорий (они у тебя уже есть в шапке)
  document.querySelectorAll(".category-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      activeCategory = btn.getAttribute("data-category") || "All";
      applyFilters();
    });
  });

  // инпуты поиска (оба сразу)
  document.querySelectorAll("input[placeholder='Search articles...']").forEach(input => {
    input.addEventListener("input", e => {
      searchQuery = (e.target.value || "").toLowerCase().trim();
      applyFilters();
    });
  });

  loadArticles();
});
</script>
</body>
</html>
